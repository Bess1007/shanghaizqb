<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>组织机构管理</title>
    <!--框架必需start-->
    <link href="../../libs/css/import_main.css" rel="stylesheet" type="text/css"/>
    <link href="../../libs/skins/skyblue/style.css" rel="stylesheet" type="text/css" id="theme" themeColor="skyblue" positionTarget="positionContent"/>
    <link href="skin/style.css" rel="stylesheet" type="text/css" id="skin" skinPath="system/style1_accordion_skyblue/skin/"/>
    <link href="../../libs/css/import_basic.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="../../libs/js/jquery.js"></script>
    <script type="text/javascript" src="../../libs/js/language/cn.js"></script>
    <script type="text/javascript" src="../../libs/js/framework.js"></script>

    <!--框架必需end-->
    <!--弹窗组件start-->
    <script type="text/javascript" src="../../libs/js/popup/drag.js"></script>
    <script type="text/javascript" src="../../libs/js/popup/dialog.js"></script>
    <!--弹窗组件end-->
    <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/shzqb.css">
    <!--数据表格start-->
    <script src="../../libs/js/table/quiGrid.js" type="text/javascript"></script>
    <!--数据表格end-->
</head>
<body>
<div class="page_content padding6">
    <div class="groupTitle"><span><i class="fa fa-gear margin_right3"></i>组织机构管理</span></div>
    <div class="height_10"></div>
    <div id="maingrid" class="treegrid_dynamic"></div>
</div>
<script type="text/javascript">
    var gridData={"rows":[
        {"id":1,"parentId":0,"name":"上海证券报","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_star","open":false,"children":[
            {"id":2,"parentId":1,"name":"市场部","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_list","open":false,"children":[
                {"id":3,"parentId":2,"name":"市场1组","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_mark","children":null},
                {"id":11,"parentId":2,"name":"市场2组","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_mark","children":null},
                {"id":12,"parentId":2,"name":"市场3组","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_mark","children":null}
            ]},
            {"id":13,"parentId":1,"name":"财务部","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_list","children":null},
            {"id":14,"parentId":1,"name":"行政部","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_list","children":null},
            {"id":15,"parentId":1,"name":"工程部","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_list","children":null},
            {"id":16,"parentId":1,"name":"技术部","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_list","children":null},
            {"id":17,"parentId":1,"name":"生产部","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_list","open":false,"children":[
                {"id":18,"parentId":17,"name":"222","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_mark","children":null}
            ]}
        ]},
        {"id":7,"parentId":0,"name":"杭州办事处","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_star","open":false,"children":[
            {"id":8,"parentId":7,"name":"接待处","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_list","children":null},
            {"id":9,"parentId":7,"name":"洽谈处","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_list","children":null}
        ]},
        {"id":18,"parentId":0,"name":"郑州办事处","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_star","open":false,"children":[
            {"id":19,"parentId":18,"name":"接待处","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_list","children":null},
            {"id":20,"parentId":18,"name":"洽谈处","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_list","children":null}
        ]},
        {"id":21,"parentId":0,"name":"苏州办事处","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_star","open":false,"children":[
            {"id":22,"parentId":21,"name":"接待处","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_list","children":null},
            {"id":23,"parentId":21,"name":"洽谈处","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_list","children":null}
        ]},
        {"id":24,"parentId":0,"name":"北京办事处","orgtype":"事业单位","remarks":"上海证券报","iconClass":"icon_star","children":null}
    ]}
    var g;
    function initComplete(){
        //usePager: false设置为不分页
        g = $("#maingrid").quiGrid({
            columns: [
                { display: '机构名称', name: 'name', id:'deptId', width:"20%" , align: 'left' },
                { display: '机构编码', name: 'id',width: "20%", type: 'int', align: 'left' },
                { display: '机构类型', name: 'orgtype', width: "20%", align: 'left' },
                { display: '备注', name: 'remarks', width: "20%", align: 'left' },
                { display: '操作', isAllowHide: false, align: 'center', width:"20%",
                    render: function (rowdata, rowindex, value, column){
                        return '<div class="grid_opp_container">'
                            + '<span class="grid_opp_edit" >新增</span>'
                            + '<span class="grid_opp_edit" onclick="onEdit(' + rowdata.id + ')">修改</span>'
                            + '<span class="grid_opp_delete" onclick="onDelete(' + rowdata.id+','+rowindex + ')">删除</span>'
                            + '</div>';
                    }
                }
            ],
            height: '100%', width:"100%",checkbox:true,usePager: false,data:gridData,autoCheckChildren:false,tree: { columnId: 'deptId' }
        });
    }
    function collapseRow2(){
        for (var record in g.records){
            if(g.records[record]['name']=="杭州办事处"){
                g.collapse(g.records[record]);
            }
        }
    }
    function expandRow2(){
        for (var record in g.records){
            if(g.records[record]['name']=="杭州办事处"){
                g.expand(g.records[record]);
            }
        }
    }

    //新增
    function addUser() {
        var orgid = $("#parentId").val();
        var diag = new top.Dialog();
        diag.Title = "新增固化搜索项";
        diag.URL = "user-management-content5.html";
        diag.Width=600;
        diag.Height=400;
        diag.OkButtonText = "保存并新建搜索项";
        //顺序很重要，diag.show()之前添加确定按钮事件，show之后添加新按钮
        diag.OKEvent = function() {
            diag.innerFrame.contentWindow.submitHandler(0);
        };
        diag.show();
        diag.addButton("next", " 保 存 ", function() {
            diag.innerFrame.contentWindow.submitHandler(1);
        });

    }



    //批量删除
    function deleteUser() {
        top.Toast("showNoticeToast", "向后台发送ajax请求来批量删除。见JAVA版或.NET版演示。");
    }

    //导入
    function importUser() {
        top.Toast("showNoticeToast", "见JAVA版或.NET版演示。");
    }
    //导出
    function exportUser() {
        top.Toast("showNoticeToast", "见JAVA版或.NET版演示。");
    }

    //导出所有
    function exportUser2() {
        top.Toast("showNoticeToast", "见JAVA版或.NET版演示。");
    }

    //修改
    function onEdit(rowid){
        top.Toast("showNoticeToast", "见JAVA版或.NET版演示。");
    }

    //删除
    function onDelete(rowid,rowidx){
        top.Dialog.confirm("确定要删除该记录吗？",function(){
            top.Toast("showNoticeToast", "向后台发送ajax请求来删除。见JAVA版或.NET版演示。");
        });
    }

    //查询
    function searchHandler(){
        top.Toast("showNoticeToast", "见JAVA版或.NET版演示。");
    }

    //重置查询
    function resetSearch(){
        $("#queryForm")[0].reset();
        $('#search').click();
    }

    function maxGrid(){
        var btn=$("#fullscreenBtn").find("span");
        if(btn.hasClass('icon_actualscreen')){
            top.switchMenu(1);
            top.fullScrennHander(false);
            btn.removeClass('icon_actualscreen');
            btn.text("最大化表格");

        }
        else{
            top.switchMenu(0);
            if (typeof window.screenX === "number"){
                top.fullScrennHander(true);
            }
            else{
                top.Toast('showNoticeToast', '您的浏览器不支持全屏，如果需要，请手动按F11键。');
            }
            btn.addClass('icon_actualscreen');
            btn.text("还原窗口");
        }


    }

</script>

</body>
</html>